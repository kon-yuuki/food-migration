# 仕様書: ペットフード切り替え計算ツール（仮称）

## 1. 概要
ペットの療法食への切り替えやフード変更を、体調に配慮しながら安全に進めるためのスケジュール管理アプリ。  
新しい餌の増分（%）に基づき、日ごとの給餌量を算出し、チェックリスト形式で進捗管理する。

## 2. ターゲット
- ペットの食事管理を正確に行いたい飼い主
- 複数のペットを飼育しているユーザー

## 3. 技術スタック（推奨）
- Frontend: React（Vite）
- UI: shadcn/ui
- Styling: Tailwind CSS
- Database: Dexie.js（IndexedDB）
- PWA: `vite-plugin-pwa`
- Deployment: Vercel / Firebase Hosting / GitHub Pages など

## 4. 機能要件

### 4.1 スケジュール計算ロジック
#### 入力項目
- 1日の給餌回数
- 旧餌の1日量（g または cup）
- 新餌の1日量（g または cup）
- 増分ステップ（%）  
  例: 10%, 20%, 25%
- 開始日

#### 算出項目
- 完了までの日数  
  `ceil(100 / 増分)` 日（開始日から 100% 到達まで）
- 日ごとの旧餌/新餌の各1回量（内部算出）  
  小数点以下は切り捨て

#### 計算ルール（MVP）
- `dayIndex = 0` を開始日とする
- 当日の新餌比率 `newRatio = min((dayIndex + 1) * 増分, 100)`  
  ※開始日から切り替えを開始する
- 当日の旧餌比率 `oldRatio = 100 - newRatio`
- 各餌の1回量ベースを算出:
  - `oldBasePerFeeding = 旧餌の1日量 / 給餌回数`
  - `newBasePerFeeding = 新餌の1日量 / 給餌回数`
- 各回の給餌量:
  - `newAmountPerFeeding = newBasePerFeeding * (newRatio / 100)`
  - `oldAmountPerFeeding = oldBasePerFeeding * (oldRatio / 100)`
  - 小数点以下は切り捨て

#### 計算例（増分 25%）
- Day 0（開始日）: 旧 75% / 新 25%
- Day 1: 旧 50% / 新 50%
- Day 2: 旧 25% / 新 75%
- Day 3: 旧 0% / 新 100%

### 4.2 データ管理
- プロファイル保存:
  - 複数のペットまたは複数の切り替えプランを保存可能（Dexie.js）
- チェックリスト機能:
  - 各日程・各回ごとの「給餌済み」フラグをローカル保存

### 4.3 UI/UX
- UIコンポーネント方針:
  - 基本コンポーネントは `shadcn/ui` を利用する
  - フォームは `react-hook-form` + `zod` を前提に構築する
  - 画面固有の見た目は Tailwind CSS で補助する
- ホーム画面:
  - 現在進行中の切り替えプラン一覧
- 入力フォーム:
  - 数値を直感的に入力できるスライダーまたはボタン
- スケジュール表示:
  - カレンダーまたはタイムライン形式のリスト
- PWA対応:
  - オフライン動作
  - ホーム画面追加（インストール）対応

## 5. 画面構成案
- Dashboard: 保存済みプランのカード一覧
- Create/Edit Plan: 計算パラメータの入力画面
- Plan Detail: 日ごとの詳細計算結果とチェックリスト表示

## 6. MVPスコープ
### 含める
- プラン作成/編集
- 日次スケジュール自動計算
- 日・回単位のチェックリスト保存
- 複数プラン保存（ローカル）

### 含めない（初期リリースでは対象外）
- クラウド同期
- 通知機能（リマインダー）
- 家族間共有
